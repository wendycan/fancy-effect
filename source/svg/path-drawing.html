<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <script src='/bower_components/skrollr/dist/skrollr.min.js'></script>
  <script src="/bower_components/jquery/dist/jquery.js"></script>
  <script src="/bower_components/snap.svg/dist/snap.svg.js"></script>
  <title>Drawing a svg</title>
  <style>
    body {
      background-color: #000;
    }
    p {
      color: white;
    }
    .inline-svg {
      margin: auto;
    }
    .inline-svg, svg {
      height: 272.071px;
      width: 361.049px;
    }
  </style>
</head>

<body style="text-align:center;">
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <div data-src="/images/personalizado.svg" class="inline-svg draw skrollable"></div>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>
  <p>1</p>

  <script type="text/javascript">
  $(document).ready(function(){
  $(".draw").each(function(){
    var cur=$(this);
    cur.attr("data-"+cur.height()+"-bottom","@data-v:0");
    cur.attr("data-80-center","@data-v:1");
    cur.attr("data-v",0);
  })
  $(".inline-svg").each(function(){
    var cur=$(this);

    w=cur.width();
    h=cur.height();
    cur.css({
      width:w,
      height:h
    });

    var svg=Snap(w,h);

    Snap.load(cur.data("src"),function(f){
      svg.append(f);
      cur.data("loaded",true)
    })

    svg.appendTo(cur.get(0));
    cur.data("snap",svg);
  });

  function updateDrawings(){
    $(".draw").each(function(){
      var cur=$(this);
      var lastV=cur.data("last-v");
      var v=cur.attr("data-v");
      if(lastV!=v){
        if(cur.hasClass("line")){
          cur.css({
            transform:"scale("+v+",1)"
          })
        }
        if(cur.data("loaded")){
          var snap=$(this).data("snap");
          if(snap!=null){
            var path=snap.selectAll("path,line,polyline,polygon,ellipse");
            path.forEach(function(i){
              var l=i.attr("data-length");
              if(l==null){
                l=i.getTotalLength();
                i.attr("data-length",l);
              }
              if(typeof(l)=="undefined"){
                l=1000;
              }
              i.attr({strokeDasharray:(v*l)+","+l});
            })
          }
          cur.data("last-v",v);
        }
      }
    });
    requestAnimationFrame(updateDrawings);
  }

  updateDrawings();
  skrollr.init({
    smoothScrolling: true,
    smoothScrollingDuration: 350,
    mobileDeceleration:0.005
  });
})
  </script>

</body>

</html>
